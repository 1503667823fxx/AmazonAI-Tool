{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://aplus-studio.com/schemas/template-config.json",
  "title": "Template Configuration Schema",
  "description": "JSON Schema for APlus Studio template configuration files",
  "type": "object",
  "required": [
    "id",
    "name", 
    "version",
    "category",
    "template_type",
    "status",
    "description"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z][a-z0-9_]*[a-z0-9]$",
      "minLength": 3,
      "maxLength": 50,
      "description": "模板唯一标识符"
    },
    "name": {
      "type": "string",
      "minLength": 2,
      "maxLength": 100,
      "description": "模板显示名称"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "版本号，遵循语义化版本规范"
    },
    "category": {
      "type": "string",
      "enum": ["electronics", "beauty", "home", "seasonal"],
      "description": "模板主分类"
    },
    "subcategory": {
      "type": "string",
      "description": "模板子分类"
    },
    "template_type": {
      "type": "string",
      "enum": ["standard", "minimal", "premium"],
      "description": "模板类型"
    },
    "status": {
      "type": "string",
      "enum": ["draft", "published", "archived", "under_review"],
      "description": "模板状态"
    },
    "description": {
      "type": "string",
      "minLength": 10,
      "maxLength": 500,
      "description": "模板描述"
    },
    "display_info": {
      "type": "object",
      "properties": {
        "display_name": {
          "type": "string",
          "maxLength": 100
        },
        "short_description": {
          "type": "string",
          "maxLength": 200
        },
        "preview_image": {
          "type": "string"
        },
        "thumbnail": {
          "type": "string"
        }
      }
    },
    "classification": {
      "type": "object",
      "properties": {
        "primary_category": {
          "type": "string"
        },
        "secondary_categories": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "style_tags": {
          "type": "array",
          "items": {
            "type": "string",
            "maxLength": 30
          },
          "maxItems": 20
        },
        "keyword_tags": {
          "type": "array",
          "items": {
            "type": "string",
            "maxLength": 20
          },
          "maxItems": 50
        },
        "target_audience": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "use_cases": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "design_attributes": {
      "type": "object",
      "properties": {
        "color_tone": {
          "type": "string",
          "enum": ["warm", "cool", "neutral", "vibrant", "monochrome"]
        },
        "primary_colors": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^#[0-9A-Fa-f]{6}$"
          }
        },
        "design_style": {
          "type": "string"
        },
        "mood": {
          "type": "string"
        },
        "visual_weight": {
          "type": "string",
          "enum": ["light", "medium", "heavy"]
        },
        "complexity_level": {
          "type": "string",
          "enum": ["simple", "moderate", "complex"]
        }
      }
    },
    "layout_structure": {
      "type": "object",
      "properties": {
        "sections": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "section_order": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "supported_formats": {
          "type": "object",
          "properties": {
            "desktop": {
              "type": "object",
              "properties": {
                "width": {
                  "type": "integer",
                  "const": 1464
                },
                "height": {
                  "type": "integer", 
                  "const": 600
                },
                "description": {
                  "type": "string"
                }
              },
              "required": ["width", "height"]
            },
            "mobile": {
              "type": "object",
              "properties": {
                "width": {
                  "type": "integer",
                  "const": 600
                },
                "height": {
                  "type": "integer",
                  "const": 450
                },
                "description": {
                  "type": "string"
                }
              },
              "required": ["width", "height"]
            }
          }
        }
      }
    },
    "assets": {
      "type": "object",
      "properties": {
        "preview": {
          "type": "string"
        },
        "desktop": {
          "type": "object",
          "patternProperties": {
            "^[a-z_]+$": {
              "type": "string"
            }
          }
        },
        "mobile": {
          "type": "object",
          "patternProperties": {
            "^[a-z_]+$": {
              "type": "string"
            }
          }
        }
      }
    },
    "replaceable_areas": {
      "type": "object",
      "properties": {
        "desktop": {
          "type": "object",
          "patternProperties": {
            "^[a-z_]+$": {
              "type": "object",
              "properties": {
                "x": {
                  "type": "integer",
                  "minimum": 0
                },
                "y": {
                  "type": "integer",
                  "minimum": 0
                },
                "width": {
                  "type": "integer",
                  "minimum": 1
                },
                "height": {
                  "type": "integer",
                  "minimum": 1
                },
                "description": {
                  "type": "string"
                },
                "constraints": {
                  "type": "object"
                }
              },
              "required": ["x", "y", "width", "height"]
            }
          }
        },
        "mobile": {
          "type": "object",
          "patternProperties": {
            "^[a-z_]+$": {
              "type": "object",
              "properties": {
                "x": {
                  "type": "integer",
                  "minimum": 0
                },
                "y": {
                  "type": "integer",
                  "minimum": 0
                },
                "width": {
                  "type": "integer",
                  "minimum": 1
                },
                "height": {
                  "type": "integer",
                  "minimum": 1
                },
                "description": {
                  "type": "string"
                },
                "constraints": {
                  "type": "object"
                }
              },
              "required": ["x", "y", "width", "height"]
            }
          }
        }
      }
    },
    "customization_options": {
      "type": "object",
      "properties": {
        "color_schemes": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "primary": {
                "type": "string",
                "pattern": "^#[0-9A-Fa-f]{6}$"
              },
              "secondary": {
                "type": "string",
                "pattern": "^#[0-9A-Fa-f]{6}$"
              },
              "accent": {
                "type": "string",
                "pattern": "^#[0-9A-Fa-f]{6}$"
              }
            },
            "required": ["name", "primary"]
          }
        },
        "layout_variants": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "animation_effects": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "visibility_rules": {
      "type": "object",
      "properties": {
        "environments": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["development", "staging", "production"]
          }
        },
        "user_groups": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "geographic_regions": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "effective_date": {
          "type": "string",
          "format": "date-time"
        },
        "expiry_date": {
          "type": ["string", "null"],
          "format": "date-time"
        },
        "feature_flags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "quality_metrics": {
      "type": "object",
      "properties": {
        "completeness_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "design_quality": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "usability_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "performance_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "accessibility_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "created_at": {
          "type": "string",
          "format": "date-time"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time"
        },
        "created_by": {
          "type": "string"
        },
        "last_modified_by": {
          "type": "string"
        },
        "version_history": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "version": {
                "type": "string"
              },
              "date": {
                "type": "string",
                "format": "date-time"
              },
              "changes": {
                "type": "string"
              },
              "user": {
                "type": "string"
              }
            },
            "required": ["version", "date", "changes"]
          }
        },
        "file_info": {
          "type": "object",
          "properties": {
            "total_size": {
              "type": "string"
            },
            "image_count": {
              "type": "integer",
              "minimum": 0
            },
            "asset_count": {
              "type": "integer",
              "minimum": 0
            },
            "config_size": {
              "type": "string"
            }
          }
        },
        "usage_stats": {
          "type": "object",
          "properties": {
            "download_count": {
              "type": "integer",
              "minimum": 0
            },
            "usage_count": {
              "type": "integer",
              "minimum": 0
            },
            "rating": {
              "type": ["number", "null"],
              "minimum": 0,
              "maximum": 5
            },
            "feedback_count": {
              "type": "integer",
              "minimum": 0
            }
          }
        }
      }
    }
  }
}